<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>

  <script type="text/javascript">
  var Pipe = (function(window){
    var ORIGIN_ALLOW = "*"; 

    function _wrapCallback(json_raw,callback){
        var callback = callback || "fillTemplate";
        var code = ["window.",
          callback, 
          "(",
          json_raw,
          ")"
          ];
        return code.join("");
    }
    function _sendMessage(json,callback){
        var parent = window.parent,
            data = JSON.stringify(json);
        data = _wrapCallback(data,callback);
        parent.postMessage(data,ORIGIN_ALLOW);
    }
    return {
      sendMessage : _sendMessage
    }
  })(window);

  </script>


</body>
</html>
